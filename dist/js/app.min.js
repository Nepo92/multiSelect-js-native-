const template=(e=[],t)=>`\n  <div tabindex="0" class="multiselect__input" data-type="input">\n    <span data-type="value" class="multiselect__placeholder">${t??""}</span>\n    <i class="fas fa-angle-up select__icon"></i>\n  </div>\n  <div class="multiselect__body">\n    <ul class="multiselect__list">\n      ${e.map(e=>`<li tabindex="0" class="multiselect__item" data-type="item" data-id="${e.id}">${e.value}</li>`).join("")}\n    </ul>\n  </div>\n  `;export default class multiSelect{constructor(e,t){this.multiSelect=document.querySelector(e),this.options=t,this.placeholder=t.placeholder,this.chooseitems=[],this.render(),this.settings()}render(){const{placeholder:e,data:t}=this.options;this.multiSelect.classList.add("multiselect"),this.multiSelect.innerHTML=template(t,e,this.selectedId),this.angle=this.multiSelect.querySelector(".fas")}settings(){this.clickHandler=this.clickHandler.bind(this),this.multiSelect.addEventListener("click",this.clickHandler),this.tabHandler=this.tabHandler.bind(this),this.multiSelect.addEventListener("keyup",this.tabHandler),this.items=document.querySelectorAll(".multiselect__item"),document.body.addEventListener("click",e=>{e.target.classList.contains("multiselect__input")||e.target.classList.contains("multiselect__item")||this.close()}),this.value=this.multiSelect.querySelector('[data-type="value"]'),this.multiSelectInput=this.multiSelect.querySelector(".multiselect__input"),this.multiSelectPlaceholder=this.multiSelect.querySelector(".multiselect__placeholder")}clickHandler(e){const{type:t}=e.target.dataset;"input"===t?this.toggle():"item"===t?this.addChoose(e):"choose"===t&&this.delChoose(e)}addChoose(e){if(this.element=e.target.textContent,""!==this.element){for(let e=0;e<this.items.length;e++)if(this.element===this.chooseitems[e])return;this.chooseitems.push(this.element),this.elem=document.createElement("span"),this.elem.setAttribute("data-type","choose"),this.elem.setAttribute("tabindex","0"),this.elem.classList.add("multiselect__choose"),this.multiSelectInput.style.justifyContent="flex-start",this.multiSelectPlaceholder.innerHTML="",this.multiSelectInput.appendChild(this.elem),this.elem.innerHTML=e.target.textContent}}delChoose(e){this.element=e.target,this.elementText=e.target.textContent;for(let e=0;e<this.items.length;e++)this.elementText===this.chooseitems[e]&&(this.index=this.chooseitems.indexOf(this.elementText),this.chooseitems.splice(this.index,1),console.log(this.chooseitems));this.element.style.display="none",0===this.chooseitems.length&&(this.multiSelectPlaceholder.innerHTML=""+this.placeholder)}tabHandler(e){const{type:t}=e.target.dataset;13===e.which&&("input"===t?this.toggle():"item"===t?this.addChoose(e):"choose"===t&&this.delChoose(e))}open(){this.multiSelect.classList.add("opened"),this.angle.classList.remove("fa-angle-up"),this.angle.classList.add("fa-angle-down")}close(){this.multiSelect.classList.remove("opened"),this.angle.classList.remove("fa-angle-down"),this.angle.classList.add("fa-angle-up")}toggle(){this.multiSelect.classList.contains("opened")?this.close():this.open()}}